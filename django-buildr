#!/usr/bin/env python

"""Django Buildr

Usage:
  django-buildr generate <target> [--template=<default>]
  django-buildr (-h | --help)
  django-buildr --version

Options:
  --template=<default>  Project template [default: default].
  -h --help             Show this screen.
  --version             Show version.
"""
from os.path import join, abspath, dirname
from docopt import docopt

from generate import Command


if __name__ == '__main__':

    kwargs = docopt(__doc__, version='Django Buildr 0.1')
    templates_dir = 'templates'
    kwargs['template'] = join(abspath(dirname(__file__)), "%s/%s" % (templates_dir, kwargs['--template']))

    from plugins.south import BuildrPlugin
    kwargs.update(BuildrPlugin().get_context())

    args = (kwargs['<target>'], )

    Command().execute(*args, **kwargs)
